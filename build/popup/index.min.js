import{key,app_name}from"../src/config.min.js";import{initStorage,getStorage,putStorage}from"../src/storage.min.js";import{initMenu}from"../src/menu.min.js";import{generateRandomPass}from"../src/aes.min.js";async function init(){initStorage(key,(()=>{}));let e=await getActiveProxyTitle();await initMenu(document.body,app_name,"Proxy başlığı ekleyiniz...","Proxy Oluştur","proxies",{scheme:"",host:"",port:""},handleClick,(()=>generateRandomPass(20))),setKeyBGColor(e)}async function handleClick(e,t){let o=await getActiveProxyTitle();o=o!=e?e:"",setKeyBGColor(o),setActiveProxy(o)}function setKeyBGColor(e){for(const t of document.getElementById("SYMenuContainer1").children)t.children[0].children[0].innerHTML==e?t.children[0].classList.add("check-row"):t.children[0].classList.remove("check-row")}async function getActiveProxyTitle(){return(await getStorage()).activeProxy??""}async function getActiveProxy(){const e=await getActiveProxyTitle(),t=await getStorage();return t&&t.proxies?t.proxies[e]??"":""}async function setActiveProxy(e){const t=await getStorage();t.activeProxy=e,await putStorage(t),changeProxy()}async function changeProxy(){const e=await getActiveProxy();if(!e)return void chrome.runtime.sendMessage({type:"deleteProxy"});const t=e.scheme??"",o=e.host??"",n=parseInt(e.port)??"";chrome.runtime.sendMessage({type:"changeProxy",scheme:t,host:o,port:n})}init();